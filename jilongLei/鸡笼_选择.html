<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" />
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="format-detection" content="telephone=no" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="wrap/css/rest.css" />
    <link rel="stylesheet" type="text/css" href="wrap/css/public.css" />
    <link rel="stylesheet" type="text/css" href="wrap/css/stageSelect.css" />
    <title></title>
</head>

<body>
    <div class="mainWrp">
        <img src="wrap/img/stageTop.jpg" width="100%" alt="背景图片">
        <div class="stageSelcet">
            <h2>鸡笼挑战场</h2>
            <div class="userInfos clear">
                <div class="fl">
                    <div class="userPic">
                        <img src="wrap/img/squar.png" alt="背景方块">
                    </div>
                    <p class="userName">昵称</p>
                </div>
                <div class="fr">
                    <div class="eggsInfo">
                        99
                    </div>
                </div>
            </div>
            <div class="slidePuk" id="puk">
                <a href="javascript:;" class="qi" id="qi">5</a>
            </div>
            <p style="color:#d1b676;text-align:center;margin:12px;">滑动选择数量</p>
            <ul>
                <li>
                    <a href="鸡笼_挑战.html"><img src="wrap/img/stageNew.png" alt="初级场"></a>
                </li>
                <li>
                    <a href="鸡笼_挑战.html"><img src="wrap/img/stageMid.png" alt="中级场"></a>
                </li>
                <li>
                    <a href="鸡笼_挑战.html"><img src="wrap/img/stageHig.png" alt="高级场"></a>
                </li>
            </ul>
        </div>
    </div>

    <script>
        var qi = document.getElementById("qi")
        var puk = document.getElementById("puk")
        var startX = 0;
        var nowNum = 0;

        function getPosition(node) {
            var left = node.offsetLeft;
            var top = node.offsetTop;
            var current = node.parentNode;

            while (current != null) {
                left += current.offsetLeft;
                top += current.offsetTop;
                current = current.offsetParent
            }
            return {
                "left": left,
                "top": top
            }
        }

        qi.addEventListener("touchmove", function(evt) {
            var moveX = evt.touches[0].clientX
            var i = 1
            qiLeft = moveX - getPosition(puk).left
            if (qiLeft < -15) {
                qiLeft = -15;
            }
            if (qiLeft > puk.offsetWidth - 15) {
                qiLeft = puk.offsetWidth - 15
            }
            var stepWidth = puk.offsetWidth / 4
            switch (true) {
                case qiLeft <= 0:
                    qiLeft = -15
                    i = 1;
                    break;
                case qiLeft <= stepWidth:
                    qiLeft = stepWidth
                    i = 5;
                    break;
                case qiLeft <= stepWidth * 2:
                    qiLeft = stepWidth * 2;
                    i = 10;
                    break;
                case qiLeft <= stepWidth * 3:
                    qiLeft = stepWidth * 3;
                    i = 15;
                    break;
                case qiLeft <= puk.offsetWidth:
                    qiLeft = puk.offsetWidth - 15;
                    i = 20;
                    break;
            }

            qi.style.left = qiLeft + "px"
            qi.innerText = 5 * i
        })
    </script>

</body>

</html>